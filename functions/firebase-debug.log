[debug] [2024-08-08T21:59:25.831Z] ----------------------------------------------------------------------
[debug] [2024-08-08T21:59:25.832Z] Command:       /Users/niklasdaute/.nvm/versions/node/v20.16.0/bin/node /usr/local/bin/firebase deploy --only functions
[debug] [2024-08-08T21:59:25.833Z] CLI Version:   13.15.0
[debug] [2024-08-08T21:59:25.833Z] Platform:      darwin
[debug] [2024-08-08T21:59:25.833Z] Node Version:  v20.16.0
[debug] [2024-08-08T21:59:25.833Z] Time:          Thu Aug 08 2024 23:59:25 GMT+0200 (Central European Summer Time)
[debug] [2024-08-08T21:59:25.833Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-08-08T21:59:25.869Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-08-08T21:59:25.869Z] > authorizing via signed-in user (niklasdaute@icloud.com)
[debug] [2024-08-08T21:59:25.869Z] [iam] checking project theprojectindex-8b645 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-08-08T21:59:25.870Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/theprojectindex-8b645:testIamPermissions [none]
[debug] [2024-08-08T21:59:25.870Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/theprojectindex-8b645:testIamPermissions x-goog-quota-user=projects/theprojectindex-8b645
[debug] [2024-08-08T21:59:25.870Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/theprojectindex-8b645:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-08-08T21:59:26.792Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/theprojectindex-8b645:testIamPermissions 200
[debug] [2024-08-08T21:59:26.792Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/theprojectindex-8b645:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-08-08T21:59:26.792Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/theprojectindex-8b645/serviceAccounts/theprojectindex-8b645@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-08-08T21:59:26.793Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/theprojectindex-8b645/serviceAccounts/theprojectindex-8b645@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-08-08T21:59:27.062Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/theprojectindex-8b645/serviceAccounts/theprojectindex-8b645@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-08-08T21:59:27.062Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/theprojectindex-8b645/serviceAccounts/theprojectindex-8b645@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'theprojectindex-8b645'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script. 
[debug] [2024-08-08T21:59:31.369Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645 [none]
[debug] [2024-08-08T21:59:31.813Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645 200
[debug] [2024-08-08T21:59:31.814Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645 {"projectId":"theprojectindex-8b645","projectNumber":"117584606387","displayName":"theprojectindex","name":"projects/theprojectindex-8b645","resources":{"hostingSite":"theprojectindex-8b645","storageBucket":"theprojectindex-8b645.appspot.com","locationId":"europe-west3"},"state":"ACTIVE","etag":"1_4f3bb8dd-7750-4b7f-91b0-56b6efde657c"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-08-08T21:59:31.817Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudfunctions.googleapis.com [none]
[debug] [2024-08-08T21:59:31.817Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/theprojectindex-8b645
[debug] [2024-08-08T21:59:31.819Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/runtimeconfig.googleapis.com [none]
[debug] [2024-08-08T21:59:31.819Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/theprojectindex-8b645
[debug] [2024-08-08T21:59:31.819Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudbuild.googleapis.com [none]
[debug] [2024-08-08T21:59:31.819Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudbuild.googleapis.com x-goog-quota-user=projects/theprojectindex-8b645
[debug] [2024-08-08T21:59:31.820Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/artifactregistry.googleapis.com [none]
[debug] [2024-08-08T21:59:31.820Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/artifactregistry.googleapis.com x-goog-quota-user=projects/theprojectindex-8b645
[debug] [2024-08-08T21:59:32.931Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudfunctions.googleapis.com 200
[debug] [2024-08-08T21:59:32.931Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-08-08T21:59:32.932Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/runtimeconfig.googleapis.com 200
[debug] [2024-08-08T21:59:32.932Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-08-08T21:59:32.932Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/artifactregistry.googleapis.com 200
[debug] [2024-08-08T21:59:32.932Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-08-08T21:59:32.933Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudbuild.googleapis.com 200
[debug] [2024-08-08T21:59:32.933Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/theprojectindex-8b645/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-08-08T21:59:32.933Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645/adminSdkConfig [none]
[debug] [2024-08-08T21:59:33.541Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645/adminSdkConfig 200
[debug] [2024-08-08T21:59:33.542Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645/adminSdkConfig {"projectId":"theprojectindex-8b645","storageBucket":"theprojectindex-8b645.appspot.com","locationId":"europe-west3"}
[debug] [2024-08-08T21:59:33.543Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/theprojectindex-8b645/configs [none]
[debug] [2024-08-08T21:59:33.933Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/theprojectindex-8b645/configs 200
[debug] [2024-08-08T21:59:33.933Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/theprojectindex-8b645/configs {}
[debug] [2024-08-08T21:59:33.936Z] Validating nodejs source
[debug] [2024-08-08T21:59:34.408Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-08-08T21:59:34.409Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-08-08T21:59:34.410Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-08-08T21:59:34.416Z] Found firebase-functions binary at '/Users/niklasdaute/code/vscode/gallery/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8188

[debug] [2024-08-08T21:59:34.766Z] Got response from /__/functions.yaml {"endpoints":{"updateImageList":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"region":["europe-west3"],"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/theprojectindex-8b645.appspot.com"},"retry":false},"labels":{},"entryPoint":"updateImageList"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/niklasdaute/code/vscode/gallery/functions (70.95 KB) for uploading 
[debug] [2024-08-08T21:59:39.806Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/-/functions [none]
[debug] [2024-08-08T21:59:40.607Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/-/functions 200
[debug] [2024-08-08T21:59:40.608Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/-/functions {"functions":[{"name":"projects/theprojectindex-8b645/locations/us-central1/functions/updateImageList","eventTrigger":{"eventType":"google.storage.object.finalize","resource":"projects/_/buckets/theprojectindex-8b645.appspot.com","service":"storage.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"updateImageList","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"theprojectindex-8b645@appspot.gserviceaccount.com","updateTime":"2024-08-08T21:37:04.419Z","versionId":"1","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"06d23242112268b0e34048b476aecb57e28d6bbe"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-1021760381792.us-central1.cloudfunctions.appspot.com/b38e8cae-6d8d-4e6a-959a-8e7f9eb93c54.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"theprojectindex-8b645\",\"storageBucket\":\"theprojectindex-8b645.appspot.com\",\"locationId\":\"europe-west3\"}","GCLOUD_PROJECT":"theprojectindex-8b645","EVENTARC_CLOUD_EVENT_SOURCE":"projects/theprojectindex-8b645/locations/us-central1/functions/updateImageList"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"8d5d3f10-9556-41a9-bb6a-5cd7ae71e7dd","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/117584606387/locations/us-central1/builds/8d5d3f10-9556-41a9-bb6a-5cd7ae71e7dd","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"117584606387-compute@developer.gserviceaccount.com"}]}
[debug] [2024-08-08T21:59:40.610Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/theprojectindex-8b645/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-08-08T21:59:41.701Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/theprojectindex-8b645/locations/-/functions 200
[debug] [2024-08-08T21:59:41.701Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/theprojectindex-8b645/locations/-/functions {}
[debug] [2024-08-08T21:59:41.706Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645 [none]
[debug] [2024-08-08T21:59:42.032Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645 200
[debug] [2024-08-08T21:59:42.033Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/theprojectindex-8b645 {"projectId":"theprojectindex-8b645","projectNumber":"117584606387","displayName":"theprojectindex","name":"projects/theprojectindex-8b645","resources":{"hostingSite":"theprojectindex-8b645","storageBucket":"theprojectindex-8b645.appspot.com","locationId":"europe-west3"},"state":"ACTIVE","etag":"1_4f3bb8dd-7750-4b7f-91b0-56b6efde657c"}
[debug] [2024-08-08T21:59:42.035Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/europe-west3/functions:generateUploadUrl [none]
[debug] [2024-08-08T21:59:42.035Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/europe-west3/functions:generateUploadUrl {}
[debug] [2024-08-08T22:00:03.305Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/europe-west3/functions:generateUploadUrl 200
[debug] [2024-08-08T22:00:03.306Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/theprojectindex-8b645/locations/europe-west3/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-745823679838.europe-west3.cloudfunctions.appspot.com/94223445-e9e8-4331-9134-96db49e8a7d5.zip?GoogleAccessId=service-117584606387@gcf-admin-robot.iam.gserviceaccount.com&Expires=1723156203&Signature=l8pgDtfheQtdVs4x6HZSpYrusuMLKtvSSHgVA5gAuwQliICltkIXLV118Maa0Ju4S6S55ggLtfqeuoxeNfWfu6HXzV9%2FurPG8mOIGmWlAXc%2BlcAj5oU%2FvjZEleGPWWGCspY1Wwz5HIvx7qmLwLCRFdNNJRAJlwATmvPnuux%2F5M%2BFpOAKOFhR%2Fq%2Fxrjw8Tz1PePVR%2BgnyC3YFdvIv7EUhc6hDzjvba5r5c9msfMUrtVyGl%2BXxsi0tvSY2J61TW%2FdNwSS%2F606iIB7EHuWhyCMzNlTH7H80gQa7W5GnOqhU61BZd6hXJWLPLzSwqGj2ZytzBWfQshRDQg%2BPpPpyzbytbw%3D%3D"}
[debug] [2024-08-08T22:00:03.308Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-745823679838.europe-west3.cloudfunctions.appspot.com/94223445-e9e8-4331-9134-96db49e8a7d5.zip GoogleAccessId=service-117584606387%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1723156203&Signature=l8pgDtfheQtdVs4x6HZSpYrusuMLKtvSSHgVA5gAuwQliICltkIXLV118Maa0Ju4S6S55ggLtfqeuoxeNfWfu6HXzV9%2FurPG8mOIGmWlAXc%2BlcAj5oU%2FvjZEleGPWWGCspY1Wwz5HIvx7qmLwLCRFdNNJRAJlwATmvPnuux%2F5M%2BFpOAKOFhR%2Fq%2Fxrjw8Tz1PePVR%2BgnyC3YFdvIv7EUhc6hDzjvba5r5c9msfMUrtVyGl%2BXxsi0tvSY2J61TW%2FdNwSS%2F606iIB7EHuWhyCMzNlTH7H80gQa7W5GnOqhU61BZd6hXJWLPLzSwqGj2ZytzBWfQshRDQg%2BPpPpyzbytbw%3D%3D
[debug] [2024-08-08T22:00:03.309Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-745823679838.europe-west3.cloudfunctions.appspot.com/94223445-e9e8-4331-9134-96db49e8a7d5.zip [stream]
[debug] [2024-08-08T22:00:03.777Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-745823679838.europe-west3.cloudfunctions.appspot.com/94223445-e9e8-4331-9134-96db49e8a7d5.zip 200
[debug] [2024-08-08T22:00:03.777Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-745823679838.europe-west3.cloudfunctions.appspot.com/94223445-e9e8-4331-9134-96db49e8a7d5.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] 
The following functions are found in your project but do not exist in your local source code:
	updateImageList(us-central1)

If you are renaming a function or changing its region, it is recommended that you create the new function first before deleting the old one to prevent event loss. For more info, visit https://firebase.google.com/docs/functions/manage-functions#modify

